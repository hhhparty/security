# 大数据安全和隐私保护

## 分布式编程框架中的安全计算

在分布式编程框架中，我们需要：
- 确保映射器的可信赖性或安全数据的可信赖性。
- 防止信号从映射器输出泄露

应建立以下措施，确保分布式编程框架中的安全计算：

### 初始信任建立
为什么？
为确保映射器的可信赖性。

怎么做？
向主服务器发送连接请求时，通过主验证员使用Kerberos 身份验证或等效方式来建立初始信任。认证应是相互的，以确保主服务器的真实性。除了认证之外，还应考虑使用完整性考量机制，例如使用可信平台模块（TPM）的机制。

### 确保符合预定义的安全策略

为什么？
为保证在计算中达到高水平的安全性。

怎么做？
定期检查每个工作者的安全属性。例如，应该检查主节点的 hadoop-policy.xml 与工作节点安全策略的匹配性。

### 数据去身份化

为什么？
为防止数据标识与外部数据链接。这种链接可能会损害个人隐私。

怎么做？
所有个人身份信息（PII），如姓名、地址、社会保障号等都必须被屏蔽或从数据中删除。除了 PII 之外，还应注意准标识符的存在，准标识符是几乎可以唯一地标识数据主体的数据项（例如，邮政编码、出生日期和性别）。应采用 k 匿名技术[Swe02]等技术来减少重新识别风险。

### 通过预定义的安全策略授权访问文件

为什么？
确保映射器输入的完整性。

怎么做？
强制访问控制（MAC）。

### 确保不可信代码不能通过系统资源泄漏信息

为什么？
为隐私权。


怎么做？
强制访问控制（MAC）。授权访问管理工具 Sentry 使用 RBAC（基于角色的访问控制）加强HBASE 安全。在Apache Hadoop 中，块访问令牌被配置为确保只有授权用户能够访问存储在数据节点中的数据块。

### 防止通过输出泄漏信息

为什么？
确保安全和隐私。数据泄漏可能以许多方式发生（例如，不正确地使用加密），需要防止。调试消息、不受控制的输出流、日志功能和详细的错误页面信息有助于攻击者了解系统并形成攻击计划。

怎么做？
使用功能灵敏度来防止信息泄露。阴影执行（例如，与外部网络的通信用于获得软件版本的更新）是需要考虑的另一个方面。此外，所有数据都应在网络层上（中转）进行过滤，并符合 DLP 数据防泄漏策略。充分的数据去身份化也有助于减轻影响。

### 工作节点的维护

为什么？
确保工作节点的正常功能

怎么做？
经常检查工作节点是否发生故障并进行维修。确保它们配置正确

### 检测假节点

为什么？
避免在云和虚拟环境中的攻击。

怎么做？
构建一个框架来检测通过创建合法节点的快照引入的假节点.

### 保护映射器
为什么？
避免产生不正确的汇总输出。
怎么做？
检测映射器由于恶意修改而返回的错误结果。

### 检查数据的更改副本
 为什么？
避免在云和虚拟环境中的攻击。

怎么做？
检测重新引入的更改过副本的数据节点，并检查这些节点的真实性。单元数据的哈希机制和单元时间戳将加强完整性。



## 非关系型数据存储的安全

NoSQL几乎欸有健壮的安全性。

### 密码保护

保护隐私

怎么做？
 用安全的哈希算法进行加密或哈希操作
 使用加密哈希算法，如 SHA2（SHA-256 或以上）和 SHA3
 进行哈希操作时，使用盐去对抗离线暴力攻击

### 静态数据加密保护数据安全
2.2.1 为什么？
在应用了薄弱认证技术和授权技术的情况下可靠地保护数据。
2.2.2 怎么做？
使用强加密方法，如 AES、 RSA 和 SHA-256。代码和加密密钥的存储必须和数据存储或仓库分开。加密密钥宜在安全的离线位置进行备份。

### 使用 TLS（传输层安全技术）来建立客户端与服务器之间的连接并进行集群节点间的通讯

2.3.1 为什么？
在传输过程中维持保密性。
2.3.2 怎么做？
实施 SSL／TLS 密封式连接。在理想情况下，每个节点都配备唯一的一对公/私密钥和数字证书，以便进行客户端认证。

### 提供对可插拔认证模块（PAM）的支持

2.4.1 为什么？
对于认证相关服务，宜让用户能够使用 PAM 库 API 编程至 PAM 接口。（译者注：PAM（Pluggable Authentication Modules ）是由 Sun 提出的一种认证机制。它通过提供一些动态链接库和一套统一的 API，将系统提供的服务和该服务的认证方式分开，使得系统管理员可以灵活地根据需要给不同的服务配置不同的认证方式而无需更改服务程序，同时也便于向系统中添加新的认证手段。）

2.4.2 怎么做？
实现对 PAM 的支持。以互联网安全中心的基准进行加固，也可考虑在 OS（操作系统）层（如SELinux）进行加固。

### 实现适当的日志记录机制和运行中日志分析
2.5.1 为什么？
暴露可能的攻击。
2.5.2 怎么做？
 按照行业标准，如 NIST 日志管理指引 SP800-92 [KS06] 和 ISO27002 [ISO05]，实施日志
记录机制。
 使用 log4j 等恰当的日志记录机制。例如，ELK 堆栈（Elasticsearch、Logstash、Kibana）和 Splunk 可用于日志监控和运行中日志分析。

### 应用模糊方法进行安全测试
2.6.1 为什么？
暴露潜在的漏洞，这些漏洞通常是由 NoSQL 中的输入确认不足造成的，这些漏洞会让 HTTP协议与客户端建立通信，例如跨站点脚本和注入。

2.6.2 怎么做？
 提供无效、预期外或随机的输入并对其进行测试。典型的策略包含简单模糊化（采用完全随机的输入）和智能模糊化（根据对输入格式等的了解构筑输入数据）。

OWASP(https://www.owasp.org/index.php/Fuzzing)
MWIInfoSecurity

(https://www. mwrinfosecurity.com/our-thinking/15-minute-guide-to-fuzzing/)

等提供了相应的指南。模糊化宜在系统的不同层面来进行，包括协议层面、数据节点层面和应用程序层面等等。

 使用工具（如 Sulley）进行模糊化操作。

### 确保强制使用合适的带有时间戳的数据标记技术

2.7.1 为什么？
数据源在数据管道输送时，避免数据未经授权的修改。
2.7.2 怎么做？
使用安全标记技术，这类技术会用一个特殊、不可变的安全字段标记每个送达的特定数据源
的元组。

###  控制集群间通信
2.8.1 为什么？
确保通道安全。
2.8.2 怎么做？
确保每个节点在建立可信通信通道前确认其他参与节点的信任度级别。

### 确保数据复制的一致性
2.9.1 为什么？
正确处理节点故障。
2.9.2 怎么做？
使用智能哈希算法，并确保即使在节点故障期间，被复制的数据在不同节点间也是一致的。

### 使用中间件层来安全地封装底层 NoSQL 层
2.10.1 为什么？
具有一个虚拟安全层。
2.10.2 怎么做？
通过中间件在集合层面或列层面引入对象层面的安全，保留其瘦数据库层。


### 使用中间件层来安全地封装底层 NoSQL 层
2.10.1 为什么？
具有一个虚拟安全层。
2.10.2 怎么做？
通过中间件在集合层面或列层面引入对象层面的安全，保留其瘦数据库层。

### 确保数据复制的一致性
2.9.1 为什么？
正确处理节点故障。
2.9.2 怎么做？
使用智能哈希算法，并确保即使在节点故障期间，被复制的数据在不同节点间也是一致的。

## 确保数据存储和事务日志

由于其解决方案（如自动分层）不会记录数据的存储位置，因此大数据存储的管理需具安全性。为避免安全威胁，宜实施下列方法。

### 实施已签名消息摘要的互换
3.1.1 为什么？
解决可能出现的争议。
3.1.2 怎么做？
 使用公共消息摘要（SHA-2 或强度更高的）为每个数字文件或文档提供数字标识，然后由发送者以数字方式签名，保持不可否认性；
 完全相同的文档使用相同的消息摘要；
 即使文档只有轻微改动也使用不同的消息摘要来区分。

### 确保对散列链或持续验证字典（PAD）的定期审计
3.2.1 为什么？
解决用户新鲜度和写入序列化问题。
3.2.2 怎么做？
使用红-黑树这类技术并跳过列表数据结构来实现 PAD。[AGT01]。

### 使用 SUNDR
3.3.1 为什么？
SUNDR（安全不受信任的数据存储库）是一种网络文件系统，用以在不受信任的服务器上安
全地存储数据。
3.3.2 怎么做？
使用 SUNDR 来检测恶意服务器操作员或用户对任何未被授权的文件修改的尝试，SUNDR 也能使用叉一致性有效检测可视文件修改中的完整性或一致性故障。

### 使用广播加密
3.4.1 为什么？
提高可扩展性。
3.4.2 怎么做？
使用广播加密方案[FN 93]，此时播出者针对正在收听某一广播频道的某种用户子集 S 加密一条消息。S 中的任一用户都可以使用他的私钥来解密广播。然而，即使 S 以外的所有用户都串通起来，也无法获得这一广播内容的任何信息。这样的系统据说是防串通的。播出者可选择任一子集 S 来加密。S 的一些成员仍然有可能通过使用分配给他们的私钥构建盗版解码器来协助进行盗版。也宜实施叛徒追查机制来确定这些恶意成员的身份，从而遏制盗版行为。

### 使用延迟撤销和密钥轮换
3.5.1 为什么？
提高可扩展性。
3.5.2 怎么做？
 使用延迟撤销，即延迟重新加密直至文件得到更新，使撤销操作更便宜。
 为了实现这一点，需针对撤销后才修改的所有文件创建一个新的文件组，然后在文件重新加密时将文件移到这个新的文件组。这么做会产生以下两个问题：
 问题：每次撤销后系统中的密钥数量增加
 解决方案：关联所涉文件组的密钥。
 问题：由于在连续撤销之后重新加密的文件集没有彼此包含，因此重新加密文件时，会越来越难确定这个文件应该移到哪个文件组。
 解决方案：使用密钥轮换。对密钥进行设置，让文件始终按最新文件组的密钥（重新）
加密；由于密钥是相互关联的，则用户只需记住最新的密钥，并可在必要时推导出以前的密钥。

### 实现高概率的可恢复性证明（POR）或可证明性数据持有（PDP）方法
3.6.1 为什么？
假设某个客户将大量数据上传到了云端。她怎么知道云端的数据确实是可用的？云端可能已经删除或修改了部分数据。一个简单的办法是让云端把数据发送回来。然而，这种办法太贵了，而且也失去了将数据移到云端的意义。另一个简单的办法是让云端发送数据的散列。但是，一个散列一旦计算出来，就可以在之后的查询中重播。
3.6.2 怎么做？
Ateniese 等人[ABC + 07]引入了一种可证明性数据持有（PDP）模型，有了这种模型，如果客户在不受信任的服务器上存储了数据，就可以在不恢复数据的情况下验证服务器是否持有原始数据。该模型通过从服务器随机抽取区块集合的样本，生成数据持有的概率证明，从而大大提高了效率。客户保留一个常量的元数据，用以验证该证明。这种质疑/响应协议传输少量、常量的数据，使网络通信最小化。

Kaliski 和 Juels [JK07]开发了一种不太一样的密码式构建区块，称为可恢复性证明（POR）。POR让客户能够确定是否可以从云中“恢复”文件。更精确地说，成功执行的 POR 向验证者确保，证明者提供了一种协议接口，验证者可以通过该协议接口完整地恢复指定文件。当然，证明者在成功加入 POR 后仍有可能拒绝发布文件。然而，在排除证明者行为变化的情况下，POR 提供了可能性最大的文件可恢复性保证。

### 实施基于策略的加密系统（PBES）
3.7.1 为什么？
避免串通攻击（假设用户不互换其私钥）。
3.7.2 怎么做？
 对于以单调布尔表达式正式写入标准规范表格的基于凭证的方针，允许用户对消息加密。
 提供加密，以便只有对符合方针的凭证集合有权限的用户才能成功解密该消息。
### 实施中介解密系统
3.8.1 为什么？
避免串通攻击（假设用户愿意在不交换解密内容的情况下互换私钥）。
3.8.2 怎么做？
 在中介RSA密码式方法和系统中，发送者使用加密指数e和公共模数n来加密消息（m），
接收者和受信任的权力方相互合作，以使用各自的解密指数组成部分 dU、dT 来解密这
条加过密的消息。为了防止受信任的权力方在有接收者解密指数部分 dU 权限的情况下
读取消息，接收者在将加密消息传递给权力方之前将其盲化。这种盲化通过使用因子 r<e>
（其中 r 是个随机秘密数字）的模数 n 盲化操作来实现。接着受信任的权力方将其解密
指数部分 dT 应用于消息，并将结果返回给接收者，接收者取消盲化，并应用其解密指
数部分 dU 来恢复消息。

## 终端输入验证与过滤

## 安全、合规性的实施监控

## 可扩展与可组合的隐私保护

## 大数据加密技术

## 细粒度的访问控制

## 细粒度的审计

## 数据来源

