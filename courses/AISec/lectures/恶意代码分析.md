# 恶意代码分析
https://mp.weixin.qq.com/s/zPja2hyX7PsCTnwsfSmZ4g
## 挑战

- 如果使用基于神经网络的序列分类器，那么按字节作为序列单位，显然序列长度过于巨大。
  - 例如，即便使用音频分析神经网络 wavenet，万级的序列长度已是极限。
  - 长度增加会导致各神经网络层中的激活函数会占据巨大内存空间。例如步长200万的序列，每步用32bit的300维可训练嵌入层，那么仅仅输入数据就需要2.4GB；如果它被传输到具有滤波器大小为3和滤波器数量为128的保持长度不变的一维卷积层时，这一层的激活函数有需要1GB。而这指示单个序列输入到单层的情形，而通常情况下，神经网络过程中每次输入的是一个minibatch。
- 恶意代码的指标可能非常稀疏，并分布于整个可执行文件中
- 将训练集中的全局标签映射到子序列时，将被由此引入的噪声所淹没。
- 恶意代码中字节包含的信息有多态性，要结合上下文才能确定真实意义
- 可能有混淆和加密
- 函数调用和跳转关系复杂

我们需要：
- 一方面增加模型中训练参数的数量
- 一方面要让激活函数的内容占用量尽可能少。

设计网络模型时，要求：
- 计算量和内存用量能够根据序列长度而高效扩展
- 在检查整个文件时，能够同时考虑本地和全局上下文
- 在分析标记为恶意软件的时候，能够提供更好的解释能力。

