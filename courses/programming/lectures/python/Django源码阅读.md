# Django 源码阅读

## 概述

## xxx

## 细节

### 管理模块

### 配置模块

django.conf

#### class LazySetting

Class LazySetting 位于django\core\management\__init__.py 中。

原文译文：这个类，作为延迟代理，既为全局Django设置，也为自定义设置对象。用户可以手动配置设置使用这个延迟代理。另一方面，Django使用DJANGO_SETTINGS_MODULE指向的设置模块。

> python的类属性的查找方式：
> 在查找一个实例化的类属性的时候
> - 首先查找这个类的实例属性是否存在，存在直接返回;
> - 如果类的实例属性中不存在，则在类的类属性中查找，类属性中存在，则返回;
> - 如果类属性中也不存在，若定义了```__getattr__```方法，则根据```__getattr__```方法获取属性;
> - 在python中类属性和实例属性会记录在类的一个内置变量```__dict__```中，类属性和实例属性有各自维护的```__dict__```。

LazySetting类的实现就是通过定义```__getattr__```方法实现的。在LazySetting对象中查找一个属性的时候，先在实例属性 ```self.__dict__```中查找，没有找到话，通过```__getattr__```方式获取，获取到后，将属性值保存到实例属性中，这样就实现了属性在使用的时候再获取，然后保存。我们还可以再获取属性之前，先将属性的值自定义，这样就可以不用使用```__getattr__```的方式来获取默认的值。

> 要点：LazzySettings 延迟加载的方式，是在动态加载的基础上，更加优化的一种属性获取方法。一次性全局属性/设置的动态加载会使系统启动时负载较大，但有的属性/设置并不急需，甚至可能从不需要，所以使用延迟加载的方式，在需要某个属性时再从静态文件或用户输入中加载它，可以较好的解决这种问题。

### 管理模块

#### class ManagementUtility

django-admin 和 manage.py 工具的逻辑包装类. 位于 ```django\core\management\__init__.py```。

