# Linux 共享库基础知识

## 共享库命名

通常命名规则是： libxxx.so.x.y.z

- lib 表示是一个共享库
- xxx 共享库名称
- so 库文件的标准后缀名
- x 主版本号
- y 次版本号
- z 发行版本号

为方便管理依赖关系，创建或部署共享库时，必须遵循统一约定的规则才行，其中包括动态库的命名规则及其部署方式。

共享库命名约定

每个动态库有一个包含了真正的库代码的文件名，通常被称为库的 realname ，命名格式通常为
libxxx.so.x.y.z，其中so后缀中的x为主版本号，y为副版本号，z为发行版本号。例如，我的linux系统机器上zlib共享库的realname为 libz.so.1.2.8，这个文件是含有可执行的二进制代码的。

每个动态库都有一个以"lib"为前缀且以".so.x"为结尾的被称为 soname
的特定名称，其中x为主版本号，soname命名格式通常为libxxx.so.x。例如，我的linux系统机器上zlib共享库的soname为libz.so.1。这个soname包含了动态库的主版本号，这个doname一般会包含在库代码的头文件中，这个可以使用 readelf -d 读取出来，使用这个动态库的程序的二进制ELF的头文件中包含有这个动态库的soname。程序运行时会按照这个名称去找真正的库文件。

此外，编译链依赖了共享库的应用模块时，链接器只认不带任何版本号的共享库名， 可以将库名称作" linker name。
例如，我的linux系统机器上zlib共享库的linkername为libz.so。也即，链接使用了动态库的程序时查找的动态库名称。例如：gcc -o test test.o -lz , 链接时就会找libz.so 。若没有这个文件，链接器就报错。

## References
http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html