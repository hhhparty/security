# 免杀技术


## PE文件病毒
PE文件病毒的特点是一般都包含以下过程：
- 获取kernel32.dll基地址，并获取该dll的导出表；
- 在导出表中找到要调用的API函数指针，存其于堆栈或变量中；
- 查找感染目标文件，并获取其基址。
  - 可能使用 CreateFile,CreateFileMapping,ViewOfMapFile将文件打开。
- 根据目标文件PE结构将病毒代码注入。
  - 常见两种方法：一是增加一个section注入病毒；另一种是选择一个还有剩余空间的节（节多是按照1000为单位对齐）
- 注入代码中可能有：网络连接进程、数据破坏、键盘记录等
